{"componentChunkName":"component---src-templates-post-template-tsx","path":"/study-blog/javascript-execution-context/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>자바스크립트의 동작 원리를 담고 있는 핵심 개념</p>\n<p>소스코드를 실행하는 데 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역</p>\n<p>소스코드의 타입에 따라 실행 컨텍스트를 생성하는 과정과 관리 내용이 다름</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">소스코드 타입</th>\n<th align=\"center\">설명</th>\n<th align=\"center\">실행 컨텍스트</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">전역 코드<br />(global code)</td>\n<td align=\"center\">전역에 존재하는 소스코드<br />전역에 정의된 함수, 클래스 등의 내부 코드 포함 X</td>\n<td align=\"center\">전역 실행 컨텍스트</td>\n</tr>\n<tr>\n<td align=\"center\">함수 코드<br />(function code)</td>\n<td align=\"center\">함수 내부에 존재하는 소스코드<br />함수 내부에 중첩된 함수, 클래스 등의 내부 코드 포함 X</td>\n<td align=\"center\">함수 실행 컨텍스트</td>\n</tr>\n<tr>\n<td align=\"center\">eval 코드<br />(eval code)</td>\n<td align=\"center\">빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드</td>\n<td align=\"center\">eval 실행 컨텍스트</td>\n</tr>\n<tr>\n<td align=\"center\">모듈 코드<br />(module code)</td>\n<td align=\"center\">모듈 내부에 존재하는 소스코드<br />모듈 내부의 함수, 클래스 등의 내부 코드 포함 X</td>\n<td align=\"center\">모듈 실행 컨텍스트</td>\n</tr>\n</tbody>\n</table>\n<p>식별자(변수, 함수, 클래스 등의 이름)를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 메커니즘. 모든 코드는 실행 컨텍스트를 통해 실행되고 관리</p>\n<ul>\n<li>식별자와 스코프 - 렉시컬 환경으로 관리</li>\n<li>코드 실행 순서 - 실행 컨텍스트 스택으로 관리</li>\n</ul>\n<h1>소스코드의 평가와 실행</h1>\n<p>자바스크립트 엔진은 소스코드를 2개의 과정으로 나누어 처리</p>\n<ol>\n<li>소스코드의 평가\n<ul>\n<li>실행 컨텍스트 생성</li>\n<li>변수, 함수 등의 선언문 먼저 실행</li>\n<li>생성된 변수/함수 식별자를 키로 실행 컨텍스트가 관리하는 스코프에 등록</li>\n</ul>\n</li>\n<li>소스코드의 실행\n<ul>\n<li>런타임 시작 - 선언문을 제외한 소스코드가 순차적으로 실행</li>\n<li>소스코드 실행에 필요한 정보(변수/함수의 참조)를 실행 컨텍스트가 관리하는 스코프에서 검색하여 취득</li>\n<li>소스코드의 실행 결과(변수 값의 변경 등)는 다시 실행 컨텍스트가 관리하는 스코프에 등록</li>\n</ul>\n</li>\n</ol>\n<h1>렉시컬 환경(Lexical Environment)</h1>\n<p>식별자, 식별자에 바인딩된 값, 상위 스코프에 대한 참조를 기록하는 자료구조</p>\n<p>실행 컨텍스트를 구성하는 컴포넌트</p>\n<p>키와 값을 갖는 객체 형태의 스코프(전역/함수/블록 스코프)를 생성하여 식별자를 키로 등록하고 식별자에 바인딩된 값을 관리</p>\n<p>스코프를 구분하여 식별자를 등록하고 관리하는 저장소 역할을 하는 렉시컬 스코프의 실체</p>\n<h2>렉시컬 환경의 컴포넌트 구성</h2>\n<ul>\n<li>\n<p>환경 레코드(EnvironmentRecord)</p>\n<p>스코프에 포함된 식별자를 등록하고 등록된 식별자에 바인딩된 값을 관리하는 저장소 (소스코드 타입에 따라 관리)</p>\n</li>\n<li>\n<p>외부 렉시컬 환경에 대한 참조(OuterLexicalEnvironmentReference)</p>\n<p>상위 스코프를 가리킴</p>\n<p>단방향 링크드 리스트인 스코프 체인을 구현</p>\n<blockquote>\n<p><strong>상위 스코프</strong></p>\n<p>외부 렉시컬 환경</p>\n<p>해당 실행 컨텍스트를 생성한 소스코드를 포함하는 상위 코드의 렉시컬 환경</p>\n</blockquote>\n</li>\n</ul>\n<h1>실행 컨텍스트 스택 = 콜 스택(call stack)</h1>\n<p>실행 컨텍스트는 스택 자료구조로 관리</p>\n<p>코드의 실행 순서를 관리하는 것</p>\n<p>실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트는 언제나 실행 중인 코드의 실행 컨텍스트</p>\n<p>실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트 = 실행 중인 실행 컨텍스트(running execution context)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> z <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> z<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 6</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/60ca398a53c8a9b2d2d468ae23f51ff2/22121/call-stack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.895833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABHElEQVR42l2OsY7CMAyG+/7vw1WkA11pFzpQknIDFIFQO9ROE8dOQDrRSqfTfdMv25/tLITgvXfOxRiZ2S2klERkzSKSUlozM6eU/AIRZd57ay0iiggR4YKIMDMAICIzi8haJ6IYIyJaa51zGRHN82yt/SfHGMNCjPGvnFKy1s7z/JG997+NEAIzhxBSStfrdbfblWXZ9/26aH2BiOzCR16niej1el0ul31V1XWNiPf7XW23hSoejwcAVFVdVVXf9+/3ez0TQsiez6cx+nTSzjljzGazUUqN4wgAzeHQNA0gjuOQ5/lXnnddx8xd12l9ut1umTFGKVUUxTAME0xt236fz0QEAG3bHo8tAIRAWhut9TRNiFiWpVKqaZofFm2AbR2KEZkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/60ca398a53c8a9b2d2d468ae23f51ff2/a59e9/call-stack.webp 192w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/0ca9f/call-stack.webp 384w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/dc9b9/call-stack.webp 768w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/0a256/call-stack.webp 947w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/60ca398a53c8a9b2d2d468ae23f51ff2/3b721/call-stack.png 192w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/66595/call-stack.png 384w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/fe486/call-stack.png 768w,\n/static/60ca398a53c8a9b2d2d468ae23f51ff2/22121/call-stack.png 947w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/60ca398a53c8a9b2d2d468ae23f51ff2/fe486/call-stack.png\"\n            alt=\"call-stack\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>전역 코드의 평가와 실행</p>\n<ul>\n<li>평가\n<ul>\n<li>전역 실행 컨텍스트 생성 및 실행 컨텍스트 스택에 푸시</li>\n<li>전역 변수 x와 전역 함수 foo가 전역 실행 컨텍스트에 등록</li>\n</ul>\n</li>\n<li>실행\n<ul>\n<li>전역 변수 x에 값 할당 및 전역 함수 foo 호출</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>foo 함수 코드의 평가와 실행</p>\n<p>전역 함수 foo가 호출되면 전역 코드의 실행이 일시 중단되고 코드의 제어권이 foo 함수 내부로 이동</p>\n<ul>\n<li>평가\n<ul>\n<li>foo 함수 실행 컨텍스트 생성 및 실행 컨텍스트 스택에 push</li>\n<li>foo 함수의 지역 변수 y와 중첩 함수 bar가 foo 함수 실행 컨텍스트에 등록</li>\n</ul>\n</li>\n<li>실행\n<ul>\n<li>지역 변수 y에 값 할당 및 중첩 함수 bar 호출</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>bar 함수 코드의 평가와 실행</p>\n<p>중첩 함수 bar가 호출되면 foo 함수 코드의 실행이 일시 중단되고 코드의 제어권이 bar 함수 내부로 이동</p>\n<ul>\n<li>\n<p>평가</p>\n<ul>\n<li>bar 함수 실행 컨텍스트 생성 및 실행 컨텍스트 스택에 push</li>\n<li>bar 함수의 지역 변수 z가 실행 컨텍스트에 등록</li>\n</ul>\n</li>\n<li>\n<p>실행</p>\n<ul>\n<li>\n<p>지역 변수 z에 값 할당 및 console.log 메서드 호출</p>\n<blockquote>\n<p>console.log 메서드도 함수라 실행 컨텍스트 스택에 푸시하지만 생략</p>\n</blockquote>\n</li>\n<li>\n<p>bar 함수 종료</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>foo 함수 코드로 복귀</p>\n<p>bar 함수가 종료되면 코드의 제어권이 foo 함수로 이동</p>\n<p>bar 함수 실행 컨텍스트를 실행 컨텍스트 스택에서 pop</p>\n<p>foo 함수 종료</p>\n</li>\n<li>\n<p>전역 코드로 복귀</p>\n<p>foo 함수가 종료되면 코드의 제어권이 전역 코드로 이동</p>\n<p>foo 함수 실행 컨텍스트를 실행 컨텍스트 스택에서 pop</p>\n<p>더 이상 실행할 전역 코드가 없으므로 전역 실행 컨텍스트를 실행 컨텍스트 스택에서 pop</p>\n</li>\n</ol>\n<h1>참고</h1>\n<ul>\n<li>이웅모. 「모던 자바스크립트 Deep Dive」. 위키북스. 2020</li>\n</ul>","frontmatter":{"page":"study-blog","categories":["JavaScript"],"date":"Invalid date","title":"실행 컨텍스트(Execution context)","subTitle":null}}}]}},"pageContext":{"slug":"/study-blog/javascript-execution-context/"}},"staticQueryHashes":[],"slicesMap":{}}